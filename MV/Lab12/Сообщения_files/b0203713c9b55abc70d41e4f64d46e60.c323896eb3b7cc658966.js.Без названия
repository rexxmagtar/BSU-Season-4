(window.webpackJsonp=window.webpackJsonp||[]).push([["bundles/b0203713c9b55abc70d41e4f64d46e60"],{D1OX:function(t,i,e){"use strict";e.r(i),e.d(i,"uiGetGallery",(function(){return n})),e.d(i,"UIGallery",(function(){return a}));var s,r=e("jE6c");s=window.hasOwnProperty("__SHARED_STATE_KEY")?window.__SHARED_STATE_KEY:Object.create(null),Object.defineProperty(window,"__SHARED_STATE_KEY",{configurable:!0,value:s});var l=()=>window.__SHARED_STATE_KEY,h=t=>l()[t],o={persistIfInitialized:!0},_=((t,i,e)=>{var s=Object(r.defaults)({},e,o),_=t in l(),n=h(t),a=_&&s.persistIfInitialized?n:i(n);((t,i)=>{l()[t]=i})(t,a);return()=>h(t)})("ui-gallery",()=>({galleries:{},incIndex:0}));function n(t){var i=domData(ge(t),"gallery-id");return i&&_().galleries[i]}class a{constructor(t,i){if(!t)throw new Error("No element was provided for UIGallery");if(t=ge(t),!hasClass(t,"ui_gallery"))throw new Error("Provided incorrect element for UIGallery");var e=n(t);if(e)return e;this._opts=extend({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1},i),this._id=_().incIndex,_().incIndex+=1,this._el=t,this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._itemWidth=getSize(this._items[0])[0],this._itemOffset=intval(getStyle(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=intval(getStyle(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=geByClass1("ui_gallery__inner_cont",this._el),this._inner=geByClass1("ui_gallery__inner",this._el),this._scroll=function(){var t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){var i=se('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');ge("content").appendChild(i);var e=i.scrollLeft;t.rtl=vk.rtl,t.backward=e>0,i.scrollLeft=1e3,t.delta=i.scrollLeft===e?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,re(i),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[]},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),domData(this._el,"gallery-id",this._id),_().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&addEvent(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this))}_initArrows(){this._opts.noArrows?addClass(this._el,"ui_gallery_no_arrows"):(this._leftArrow=geByClass1("ui_gallery__arrow_left",this._el),this._rightArrow=geByClass1("ui_gallery__arrow_right",this._el),this._arrowWidth=getSize(this._leftArrow)[0],addEvent(this._leftArrow,"click",this._onArrowScroll.bind(this,-1)),addEvent(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),addEvent(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),addEvent(this._rightArrow,"click",this._onArrowScroll.bind(this,1)),addEvent(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),addEvent(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){if(this._opts.scrollX||this._opts.scrollY){var i;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;i=-t.deltaY}else{if(!this._opts.scrollX)return;i=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;i=t.wheelDeltaY}else if(void 0!==t.wheelDelta)i=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;i=-t.detail}i=this._scroll.rtlSame?-i:i,Math.abs(i)>=120&&(i=74*Math.max(-1,Math.min(1,i))),this._innerCont.scrollLeft-=i,this._checkItemsAfterScroll(this._innerCont.scrollLeft),cancelEvent(t)}}_onArrowScroll(t,i){if(!this._opts.noArrows){var e=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*(this._width-2*this._arrowWidth),s=this._innerCont.scrollWidth-this._width;this._scroll.negative?(e=Math.min(e,0),e=Math.abs(e)):e=Math.max(0,e),e=Math.min(s,e);var r=this._scroll.negative||this._scroll.rtlSame?-t:t;if(r>0&&e<s)e=Math.floor(e/this._itemFullWidth)*this._itemFullWidth;else if(r<0&&e>0){e=Math.floor(e/this._itemFullWidth)*this._itemFullWidth}if(0===e||e===s){var l=this._innerCont.scrollWidth;addClass(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),e&&(e+=t*(this._innerCont.scrollWidth-l))}this._scroll.negative&&(e=-e),animate(this._innerCont,{scrollLeft:e},{duration:Math.abs(this._innerCont.scrollLeft-e)+50,transition:Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(e),setTimeout(()=>removeClass(this._inner,"ui_gallery__inner_shift_instant"),0),cancelEvent(i)}}_checkItemsAfterScroll(t,i){if(this._scroll.negative&&(t=Math.abs(t)),this._opts.markOutside||this._opts.onViewItem){var e,s=this._itemWidth/3,r=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,l=t&&Math.floor(r/this._itemFullWidth),h=l*this._itemFullWidth+2*s;e=this._scroll.backward?t+this._width<this._inner.scrollWidth-h:t>h;var o,_=Math.min(this._items.length-1,Math.floor((r+this._width)/this._itemFullWidth)),n=_*this._itemFullWidth+2*s;if(o=this._scroll.backward?t>this._inner.scrollWidth-n:t+this._width<n,this._opts.onViewItem){var a=e?Math.min(this._items.length-1,l+1):l,d=o?Math.max(0,_-1):_;if(i||a!==this._visible.left||d!==this._visible.right){for(var c=a;c<=d;c++)(this._visible.left<0||i&&!inArray(this._items[c],this._visible.items)||c<this._visible.left||c>this._visible.right)&&this._opts.onViewItem(this._items[c],c);this._visible.left=a,this._visible.right=d,this._visible.items=this._items.slice(a,d+1)}}this._opts.markOutside&&(i?(geByClass("ui_gallery_item_outside",this._inner).forEach(t=>{removeClass(t,"ui_gallery_item_outside")}),this._outside.left=-1,this._outside.right=-1):((l!==this._outside.left||!e)&&this._outside.left>=0&&(removeClass(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(_!==this._outside.right||!o)&&this._outside.right>=0&&(removeClass(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),e&&l!==this._outside.left&&(addClass(this._items[l],"ui_gallery_item_outside"),this._outside.left=l),o&&_!==this._outside.right&&(addClass(this._items[_],"ui_gallery_item_outside"),this._outside.right=_))}if(!this._opts.noArrows){var u=t>0,f=t+this._width<this._inner.scrollWidth;toggleClass(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?f:u),toggleClass(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?u:f)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}_onArrowMouseOver(t){this._opts.noArrows||addClass(this._inner,"ui_gallery__inner_shift_"+t)}_onArrowMouseOut(){this._opts.noArrows||(removeClass(this._inner,"ui_gallery__inner_shift_left"),removeClass(this._inner,"ui_gallery__inner_shift_right"))}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,i){t=t||[],this.addItems(t),this._finised=!!i||!t.length,this._loadingMore=!1}addItems(t,i){if((t=t||[]).length){var e=i>=0&&i<this._items.length?this._items[i]:null;t.forEach(t=>{e?domInsertBefore(t,e):this._inner.appendChild(t)}),this.refresh()}}destroy(){removeEvent(this._innerCont),removeEvent(this._leftArrow),removeEvent(this._rightArrow),domData(this._el,"gallery-id",null),delete _().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),re(this._el)}removeItem(t){return isNumeric(t)&&(t=this._items[t]),!(!t||!inArray(t,this._items))&&(re(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=getSize(this._el)[0],this._items=geByClass("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}getItems(){return this._items}getVisibleItems(){return this._visible.items.map((t,i)=>[t,this._visible.left+i])}}}}]);try{stManager.done("cmodules/bundles/b0203713c9b55abc70d41e4f64d46e60.c323896eb3b7cc658966.js")}catch(t){}