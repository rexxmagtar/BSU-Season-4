!function(o){function e(e){for(var r,s,a=e[0],c=e[1],_=e[2],u=0,d=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(t,s)&&t[s]&&d.push(t[s][0]),t[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(o[r]=c[r]);for(n&&n(e);d.length;)d.shift()();return i.push.apply(i,_||[]),l()}function l(){for(var o,e=0;e<i.length;e++){for(var l=i[e],r=!0,a=1;a<l.length;a++){var c=l[a];0!==t[c]&&(r=!1)}r&&(i.splice(e--,1),o=s(s.s=l[0]))}return o}var r={},t={"web/wkpoll":0},i=[];function s(e){if(r[e])return r[e].exports;var l=r[e]={i:e,l:!1,exports:{}};return o[e].call(l.exports,l,l.exports,s),l.l=!0,l.exports}s.m=o,s.c=r,s.d=function(o,e,l){s.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:l})},s.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,e){if(1&e&&(o=s(o)),8&e)return o;if(4&e&&"object"==typeof o&&o&&o.__esModule)return o;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var r in o)s.d(l,r,function(e){return o[e]}.bind(null,r));return l},s.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(e,"a",e),e},s.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},s.p="/js/cmodules/";var a=window.webpackJsonp=window.webpackJsonp||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var _=0;_<a.length;_++)e(a[_]);var n=c;i.push([293,"bundles/common"]),l()}({293:function(o,e,l){o.exports=l("XVac")},XVac:function(o,e,l){"use strict";l.r(e);var r=l("qJQ3");window.WkPoll=r.WkPoll;try{window.stManager.done(window.jsc("web/wkpoll.js"))}catch(o){}},qJQ3:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"WkPoll",(function(){return WkPoll}));var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("HEwt"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a1Th"),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Btvt"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("rGqo"),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("rE2o"),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ioFf"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("v+DW"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("98sY"),_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("jE6c");function _slicedToArray(o,e){return _arrayWithHoles(o)||_iterableToArrayLimit(o,e)||_unsupportedIterableToArray(o,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,e){if(o){if("string"==typeof o)return _arrayLikeToArray(o,e);var l=Object.prototype.toString.call(o).slice(8,-1);return"Object"===l&&o.constructor&&(l=o.constructor.name),"Map"===l||"Set"===l?Array.from(l):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(o,e):void 0}}function _arrayLikeToArray(o,e){(null==e||e>o.length)&&(e=o.length);for(var l=0,r=new Array(e);l<e;l++)r[l]=o[l];return r}function _iterableToArrayLimit(o,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(o)){var l=[],r=!0,t=!1,i=void 0;try{for(var s,a=o[Symbol.iterator]();!(r=(s=a.next()).done)&&(l.push(s.value),!e||l.length!==e);r=!0);}catch(o){t=!0,i=o}finally{try{r||null==a.return||a.return()}finally{if(t)throw i}}return l}}function _arrayWithHoles(o){if(Array.isArray(o))return o}var WkPoll={init:function(o,e){if(extend(cur,{wkPollId:e.id,wkPollIsBoard:e.is_board,wkPollIsAnonymous:e.is_anonymous,wkPollOptionId:0,wkPollInd:0,wkPollGraph:!1,wkPollProgress:!1,wkPollCriteria:{},wkPollFull:{},wkPollLoaded:{},wkPollLoading:{},wkPollQuery:{},wkPollBoxEl:domPN(geByClass1("_wk_voting_stats_"+e.id)),wkPollWrapEl:geByClass1("_wk_voting_stats_"+e.id),wkPollTabsEl:geByClass1("_wk_voting_tabs_"+e.id),wkPollTabsOptionsEl:geByClass1("_wk_voting_tabs_options_"+e.id),wkPollTabsGraphEl:geByClass1("_wk_voting_tabs_graph_"+e.id),wkPollGraphEl:geByClass1("_wk_voting_graph_"+e.id),wkPollPeopleEl:geByClass1("_wk_voting_people_"+e.id),wkPollOptionsEl:geByClass1("_wk_voting_options_"+e.id),wkPollCountEl:geByClass1("_wk_voting_count_"+e.id),wkPollSelectorSexEl:geByClass1("_wk_voting_selector_sex_"+e.id),wkPollSelectorAgeEl:geByClass1("_wk_voting_selector_age_"+e.id),wkPollSelectorCountryEl:geByClass1("_wk_voting_selector_country_"+e.id),wkPollSelectorCityEl:geByClass1("_wk_voting_selector_city_"+e.id),wkPollGeo:e.geo,wkPollSelectorSex:0,wkPollSelectorAge:0,wkPollSelectorCountry:0,wkPollSelectorCity:0,wkPollSelectorFriends:0}),e.tab){var l=_slicedToArray(e.tab,5),r=l[0],t=l[1],i=l[2],s=l[3],a=l[4];cur.wkPollLoaded[r]=[[t,i],[s,a]],cur.wkPollQuery[r]=extend({act:"voting_voters",voting_id:e.id,option_id:r,is_board:e.is_board},cur.wkPollCriteria),this.tab(r)}this.initEvents(o),this.scroll()},tab:function(o){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e||isVisible(cur.wkPollTabsEl)&&cur.wkPollOptionId!==o)if(o){if(cur.wkPollLoading[o]||cur.wkPollIsAnonymous)return;if(cur.wkPollLoaded[o]||cur.wkPollFull[o])return this.tabShow(o);cur.wkPollQuery[o]=extend({act:"voting_voters",voting_id:cur.wkPollId,option_id:o,is_board:cur.wkPollIsBoard},cur.wkPollCriteria),ajax.post("wkview.php",cur.wkPollQuery[o],{showProgress:()=>{cur.wkPollLoading[o]=!0,curBox().showCloseProgress()},hideProgress:()=>{delete cur.wkPollLoading[o],curBox().hideCloseProgress()},onDone:(e,l,r,t)=>{cur.wkPollLoaded[o]=[[e,l],[r,t]],this.tabShow(o)},onFail:()=>(delete cur.wkPollLoaded[o],delete cur.wkPollQuery[o],delete cur.wkPollFull[o],this.tab(),!0)})}else this.tabShow()},isInProgress:function(){return cur.wkPollProgress},showProgress:function(){cur.wkPollProgress=!0,curBox().showCloseProgress()},hideProgress:function(){cur.wkPollProgress=!1,curBox().hideCloseProgress()},hideMoreBtn:function(){hide("ui_voters_load_more")},tabLoaded:function(){var o=cur.wkPollOptionId,e=cur.wkPollInd;if(o&&!cur.wkPollLoaded[o][e+1]&&!cur.wkPollLoading[o]){if(cur.wkPollQuery[o].offset=cur.wkPollLoaded[o][e][1],!cur.wkPollQuery[o].offset||cur.wkPollFull[o])return cur.wkPollFull[o]=!0,void this.hideMoreBtn();ajax.post("wkview.php",cur.wkPollQuery[o],{onDone:(o,e)=>{var l=cur.wkPollOptionId,r=cur.wkPollInd;cur.wkPollLoaded[l]&&cur.wkPollLoaded[l][r]&&cur.wkPollLoaded[l][r][1]&&(o?(cur.wkPollLoaded[l][r+1]=[o,e],this.more()):cur.wkPollFull[l]=!0)},showProgress:()=>{cur.wkPollLoading[o]=!0,Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.lockButton)("ui_voters_load_more")},hideProgress:()=>{delete cur.wkPollLoading[o],Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_6__.unlockButton)("ui_voters_load_more")}})}},tabShow:function(o){o=intval(o);var e=geByClass1("_wk_voting_option_"+o);if(cur.wkPollOptionId){var l=geByClass1("_wk_voting_option_"+cur.wkPollOptionId);l&&removeClass(l,"wk_voting_option_selected")}e?(addClass(cur.wkPollWrapEl,"wk_voting_option_selected"),addClass(e,"wk_voting_option_selected")):removeClass(cur.wkPollWrapEl,"wk_voting_option_selected");var r=geByClass1("summary_tab_sel",cur.wkPollTabsOptionsEl);r&&replaceClass(r,"summary_tab_sel","summary_tab");var t=geByClass1("_wk_voting_tab_"+o);t&&replaceClass(t,"summary_tab","summary_tab_sel"),cur.wkPollOptionId=o,cur.wkPollInd=0,boxLayerWrap.scrollTop=0,o&&(val(cur.wkPollPeopleEl,cur.wkPollLoaded[o][0][0]),cur.wkPollQuery[o].offset=cur.wkPollLoaded[o][0][1],this.tabLoaded()),this.scroll()},scroll:function(){isVisible(cur.wkPollTabsEl)&&(getXY(cur.wkPollWrapEl,!0)[1]<=0?cur.wkPollFixed||(this.updateTabsSize(),addClass(cur.wkPollWrapEl,"wk_voting_fixed"),cur.wkPollFixed=!0):cur.wkPollFixed&&(removeClass(cur.wkPollWrapEl,"wk_voting_fixed"),cur.wkPollFixed=!1)),this.more()},updateTabsSize:function(){setStyle(cur.wkPollWrapEl,"paddingTop",cur.wkPollTabsEl.offsetHeight)},initEvents:function(o){window.uiScrollBox&&window.uiScrollBox.init(o,{onShow:()=>{addEvent(boxLayerWrap,"scroll",()=>this.scroll(),void 0,void 0,{passive:!0}),setTimeout(this.scroll,0)},onHide:()=>{removeEvent(boxLayerWrap,"scroll",()=>this.scroll())}}),this.selectorsInit(),addEvent(boxLayerWrap,"scroll",this.scroll.bind(this),void 0,void 0,{passive:!0}),onBodyResize(),this.scroll()},more:function(){var o=cur.wkPollOptionId;if(o&&!cur.wkPollLoading[o]&&isVisible("ui_voters_load_more")&&getXY("ui_voters_load_more",!0)[1]<lastWindowHeight){var e=cur.wkPollInd,l=cur.wkPollLoaded[o][e+1];if(!l)return this.tabLoaded();domFC(cur.wkPollPeopleEl).appendChild(cf(l[0])),++cur.wkPollInd,l[1]?this.tabLoaded():hide("ui_voters_load_more")}},backToBox:function(){if(cur.pollBack&&window.WkView){var o=cur.pollBack.box.getOptions(),e=WkView.initWkBox("","",{wkRaw:cur.pollBack.box.wkRaw,noChangeLocation:o.noChangeLocation});domPN(e.bodyNode).replaceChild(cur.pollBack.box.bodyNode,e.bodyNode),e.bodyNode=cur.pollBack.box.bodyNode,e.setOptions(cur.pollBack.box.getOptions()),boxLayerWrap.scrollTop=cur.pollBack.scroll,onBodyResize(),~boxQueue._boxes.indexOf(cur.pollBack.box.guid)&&boxQueue._boxes.splice(boxQueue._boxes.indexOf(cur.pollBack.box.guid),1),delete cur.pollBack}},beforePhotoShow:function(){var o=curBox();extend(cur,{pollBack:{box:o,scroll:boxLayerWrap.scrollTop}})},exportBox:function(){this.beforePhotoShow(),showBox("al_voting.php",{act:"export_box",voting_id:cur.wkPollId},{onDone:()=>{curBox().setOptions({width:500,onHide:this.backToBox.bind(this)})}})},selectorsLoaded:function(o){for(var e in o.total&&cur.wkPollCountEl&&val(cur.wkPollCountEl,o.total),o.options)if(o.options.hasOwnProperty(e)){var l=o.options[e],r=geByClass1("_wk_voting_option_"+e);if(r){var t=geByClass1("_wk_voting_option_bar_inner",r),i=geByClass1("_wk_voting_option_count",r),s=geByClass1("_wk_voting_option_percent",r);toggleClass(r,"wk_voting_option_voted",!!l.voted),t&&(t.style.WebkitTransform=`scale(${l.normal}, 1)`,t.style.transform=`scale(${l.normal}, 1)`),s&&val(s,l.percent+" %"),i&&val(i,l.count)}}},toggleFriends:function(){this.isInProgress()||(cur.wkPollSelectorFriends=intval(!cur.wkPollSelectorFriends),this.selectorsChanged())},selectorsChanged:function selectorsChanged(callback){this.isInProgress()||(this.showProgress(),cur.wkPollLoaded={},extend(cur.wkPollCriteria,{sex:cur.wkPollSelectorSex,age:cur.wkPollSelectorAge,country:cur.wkPollSelectorCountry,city:cur.wkPollSelectorCity,friends:cur.wkPollSelectorFriends}),cur.wkPollGraph?ajax.post("wkview.php",extend({act:"voting_graph",voting_id:cur.wkPollId,is_board:cur.wkPollIsBoard},cur.wkPollCriteria),{onDone:(html,js,data)=>{val(cur.wkPollGraphEl,html);try{eval(js)}catch(o){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(o,js)}this.selectorsLoaded(data),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.isFunction)(callback)&&callback()},hideProgress:()=>this.hideProgress()}):(ajax.post("wkview.php",extend({act:"voting_demography",voting_id:cur.wkPollId,is_board:cur.wkPollIsBoard},cur.wkPollCriteria),{onDone:o=>{this.selectorsLoaded(o),Object(_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.isFunction)(callback)&&callback()},hideProgress:()=>this.hideProgress()}),cur.wkPollOptionId&&this.tab(cur.wkPollOptionId,!0)))},selectorsInit:function(){if(cur.wkPollGeo){if(cur.wkPollSelectorSexEl){var o=geByClass("radiobtn",cur.wkPollSelectorSexEl);o.forEach(e=>{e.onclick=()=>{o.forEach(o=>{checkbox(o,o===e)});var l=intval(attr(e,"value"));l!==cur.wkPollSelectorSex&&(cur.wkPollSelectorSex=l,this.selectorsChanged())}}),o[0].click()}if(cur.wkPollSelectorAgeEl){var e=geByClass("radiobtn",cur.wkPollSelectorAgeEl);e.forEach(o=>{o.onclick=()=>{e.forEach(e=>{checkbox(e,e===o)});var l=intval(attr(o,"value"));l!==cur.wkPollSelectorAge&&(cur.wkPollSelectorAge=l,this.selectorsChanged())}}),e[0].click()}if(cur.wkPollSelectorCountryEl&&cur.wkPollSelectorCityEl){var l=new Dropdown(cur.wkPollSelectorCityEl,cur.wkPollGeo.cities[cur.wkPollSelectorCountry],{dark:!0,multiselect:!1,autocomplete:!0,width:180,zeroPlaceholder:!0,onChange:(o,e)=>{e=intval(e),cur.wkPollSelectorCity!==e&&(cur.wkPollSelectorCity=e,this.selectorsChanged())}});new Dropdown(cur.wkPollSelectorCountryEl,cur.wkPollGeo.countries,{dark:!0,multiselect:!1,autocomplete:!0,width:180,zeroPlaceholder:!0,onChange:(o,e)=>{e=intval(e),cur.wkPollSelectorCountry!==e&&(cur.wkPollSelectorCountry=e,cur.wkPollSelectorCity=0,this.selectorsChanged()),l&&(l.setData(cur.wkPollGeo.cities[e]),l.currenDataItems=cur.wkPollGeo.cities[e],l.setOptions({defaultItems:cur.wkPollGeo.cities[e]}),l.clear(),l.disable(1==cur.wkPollGeo.cities[e].length),l.selectItem(0))}}).selectItem(cur.wkPollSelectorCountry)}}},graphShow:function(){cur.wkPollGraph||this.isInProgress()||(cur.wkPollGraph=!0,cur.wkPollSelectorFriends=0,this.selectorsChanged(()=>{addClass(cur.wkPollBoxEl,"wk_voting_box_graphed"),this.updateTabsSize(),this.scroll()}))},graphHide:function(){cur.wkPollGraph&&!this.isInProgress()&&(cur.wkPollGraph=!1,removeClass(cur.wkPollBoxEl,"wk_voting_box_graphed"),this.updateTabsSize(),this.scroll())},graphFilter:function(o,e,l){var r=geByClass1("summary_tab_sel",cur.wkPollTabsGraphEl);r&&replaceClass(r,"summary_tab_sel","summary_tab");var t=o&&domPN(o);t&&replaceClass(t,"summary_tab","summary_tab_sel"),cur.wkPollCriteria.percent=intval(e),cur.wkPollCriteria.amount=intval(l),this.selectorsChanged()}}}});